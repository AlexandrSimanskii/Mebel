import{r as c,C as x,j as s}from"./index-13fa8a7a.js";const p=()=>{var t;const{user:r,setUser:h}=c.useContext(x),[n,i]=c.useState([]),[l,j]=c.useState(!1),o=()=>{var d;return(d=r==null?void 0:r.orders)==null?void 0:d.map(a=>a.order).flat()};return c.useEffect(()=>{i(o())},[r]),s.jsx("section",{className:"room",children:s.jsx("div",{className:"container",children:s.jsxs("div",{className:"room__inner",children:[s.jsxs("ul",{className:"room__bonus",children:[s.jsx("h4",{children:"Бонусная программа"}),s.jsxs("li",{className:"room__bonus-list",children:[s.jsxs("p",{children:["У вас ","",r.id?n&&Math.round(n.reduce((e,d)=>e+d.price,0)/100*3):0,""," бонусных баллов"]}),s.jsx("a",{children:"Правила бонусной программы"})]})]}),s.jsxs("ul",{className:"program-conditions",children:[s.jsx("li",{className:"program-conditions__cashback",children:"Возвращаем до 7% на бонусный счет"}),s.jsx("li",{className:"program-conditions__rub",children:"1 бонус = 1 рубль"}),s.jsx("li",{className:"program-conditions__present",children:"Оплачивайте бонусами до 20% от покупки"})]}),s.jsx("div",{className:"room__bottom",children:((t=r.orders)==null?void 0:t.length)&&s.jsxs("table",{children:[s.jsx("caption",{children:"Купленные товары"}),s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("td",{children:"Товар"}),s.jsx("td",{children:"Цена"}),s.jsx("td",{children:"Количество"}),s.jsx("td",{children:"Дата"})]})}),s.jsx("tbody",{children:n==null?void 0:n.map(e=>s.jsx(c.Fragment,{children:s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx("img",{src:e.image,alt:""})}),s.jsxs("td",{children:[e.price," руб"]}),s.jsxs("td",{children:[e.count," "]}),s.jsx("td",{children:e.data})]})},e.id))})]})}),l?s.jsx("div",{className:"popup",children:s.jsx("img",{src:"/images/image/bonus.jpg",alt:""})}):""]})})})};export{p as default};
