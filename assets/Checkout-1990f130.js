import{r as c,C as v,j as e}from"./index-c1cc7f61.js";import{u as y}from"./index.esm-dfaa7a9f.js";const k=()=>{var i,d;const{user:r,addOrders:x,navigate:n}=c.useContext(v);c.useState(!0),c.useState(!1);const[h,u]=c.useState(10),[p,j]=c.useState(!1),{register:t,handleSubmit:m,formState:{errors:N}}=y(),f=s=>{var a;let l={...s,order:r.carts,totalPrice:(a=r.carts)==null?void 0:a.reduce((b,o)=>b+o.price*o.count,0)};x(l,j,_)},_=()=>{setInterval(()=>{u(s=>s>1?s-1:n("/"))},1e3)};return e.jsx("section",{className:"checkout",children:e.jsxs("div",{className:"container",children:[e.jsx("div",{className:"checkout__inner",children:e.jsxs("form",{action:"submit",onSubmit:m(f),children:[e.jsxs("div",{className:"user__inform",children:[e.jsxs("div",{className:"form__field",children:[e.jsx("h5",{children:"Данные покупателя"}),e.jsx("input",{...t("name"),defaultValue:r.username,placeholder:"Имя",type:"text"}),e.jsx("input",{...t("email"),defaultValue:r.email,placeholder:"Email",type:"email"}),e.jsx("input",{...t("number"),defaultValue:r.number,placeholder:"Телефон",type:"phone"})]}),e.jsxs("div",{className:"form__field",children:[e.jsx("h5",{children:"Адресс покупателя"}),e.jsx("input",{...t("city"),placeholder:"Город",type:"text"}),e.jsx("input",{...t("street"),placeholder:"Улица",type:"text"}),e.jsx("input",{...t("home"),placeholder:"Дом",type:"text"}),e.jsx("input",{...t("flat"),placeholder:"Квартира",type:"text"})]}),e.jsxs("div",{className:"form__field",children:[e.jsx("h5",{children:"Коментарии"}),e.jsx("textarea",{...t("info"),placeholder:"Дополнительная информация",name:"info",cols:"30",rows:"10"})]})]}),e.jsxs("div",{className:"order__inform",children:[e.jsxs("table",{children:[e.jsx("caption",{children:"Ваш заказ"}),e.jsx("thead",{}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"Товар"}),e.jsx("td",{children:"Кол-во"}),e.jsx("td",{children:" Всего"})]}),(i=r.carts)==null?void 0:i.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.title}),e.jsx("td",{children:s.count}),e.jsxs("td",{children:[s.price*s.count," руб"]})]},s.id)),e.jsxs("tr",{children:[e.jsx("td",{children:"Итого"}),e.jsxs("td",{children:[(d=r.carts)==null?void 0:d.reduce((s,l)=>s+l.price*l.count,0),"руб"]})]})]})]}),e.jsxs("div",{className:"checkout__payment",children:[e.jsx("p",{children:"Способы оплаты"}),e.jsx("button",{children:"Разместить заказ"})]})]})]})}),p&&e.jsxs("div",{className:"popup",children:[e.jsx("h2",{children:"Заказ оформлен"}),e.jsxs("p",{children:["Через ",h,"сек. вас перекинет на главную страницу"]}),e.jsx("button",{onClick:()=>n("/"),children:"Перейти на главную"})]})]})})};export{k as default};
