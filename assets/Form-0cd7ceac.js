import{r as E,b as $,g as G,C as H,u as J,j as l,L as K}from"./index-c1cc7f61.js";import{u as Q}from"./index.esm-dfaa7a9f.js";var X={exports:{}};function ee(t){return t&&typeof t=="object"&&"default"in t?t.default:t}var F=ee(E),te=$;function ne(t,s){for(var r=Object.getOwnPropertyNames(s),n=0;n<r.length;n++){var e=r[n],o=Object.getOwnPropertyDescriptor(s,e);o&&o.configurable&&t[e]===void 0&&Object.defineProperty(t,e,o)}return t}function A(){return(A=Object.assign||function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function se(t,s){t.prototype=Object.create(s.prototype),ne(t.prototype.constructor=t,s)}function re(t,s){if(t==null)return{};var r,n,e={},o=Object.keys(t);for(n=0;n<o.length;n++)r=o[n],0<=s.indexOf(r)||(e[r]=t[r]);return e}function D(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var ae=function(t,s,r,n,e,o,h,k){if(!t){var i;if(s===void 0)i=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[r,n,e,o,h,k],f=0;(i=new Error(s.replace(/%s/g,function(){return u[f++]}))).name="Invariant Violation"}throw i.framesToPop=1,i}},T=ae;function q(t,s,r){if("selectionStart"in t&&"selectionEnd"in t)t.selectionStart=s,t.selectionEnd=r;else{var n=t.createTextRange();n.collapse(!0),n.moveStart("character",s),n.moveEnd("character",r-s),n.select()}}function oe(t){var s=0,r=0;if("selectionStart"in t&&"selectionEnd"in t)s=t.selectionStart,r=t.selectionEnd;else{var n=document.selection.createRange();n.parentElement()===t&&(s=-n.moveStart("character",-t.value.length),r=-n.moveEnd("character",-t.value.length))}return{start:s,end:r,length:r-s}}var ie={9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},le="_";function U(t,s,r){var n="",e="",o=null,h=[];if(s===void 0&&(s=le),r==null&&(r=ie),!t||typeof t!="string")return{maskChar:s,formatChars:r,mask:null,prefix:null,lastEditablePosition:null,permanents:[]};var k=!1;return t.split("").forEach(function(i){k=!k&&i==="\\"||(k||!r[i]?(h.push(n.length),n.length===h.length-1&&(e+=i)):o=n.length+1,n+=i,!1)}),{maskChar:s,formatChars:r,prefix:e,mask:n,lastEditablePosition:o,permanents:h}}function S(t,s){return t.permanents.indexOf(s)!==-1}function V(t,s,r){var n=t.mask,e=t.formatChars;if(!r)return!1;if(S(t,s))return n[s]===r;var o=e[n[s]];return new RegExp(o).test(r)}function z(t,s){return s.split("").every(function(r,n){return S(t,n)||!V(t,n,r)})}function P(t,s){var r=t.maskChar,n=t.prefix;if(!r){for(;s.length>n.length&&S(t,s.length-1);)s=s.slice(0,s.length-1);return s.length}for(var e=n.length,o=s.length;o>=n.length;o--){var h=s[o];if(!S(t,o)&&V(t,o,h)){e=o+1;break}}return e}function Y(t,s){return P(t,s)===t.mask.length}function I(t,s){var r=t.maskChar,n=t.mask,e=t.prefix;if(!r){for((s=B(t,"",s,0)).length<e.length&&(s=e);s.length<n.length&&S(t,s.length);)s+=n[s.length];return s}if(s)return B(t,I(t,""),s,0);for(var o=0;o<n.length;o++)S(t,o)?s+=n[o]:s+=r;return s}function ue(t,s,r,n){var e=r+n,o=t.maskChar,h=t.mask,k=t.prefix,i=s.split("");if(o)return i.map(function(f,w){return w<r||e<=w?f:S(t,w)?h[w]:o}).join("");for(var u=e;u<i.length;u++)S(t,u)&&(i[u]="");return r=Math.max(k.length,r),i.splice(r,e-r),s=i.join(""),I(t,s)}function B(t,s,r,n){var e=t.mask,o=t.maskChar,h=t.prefix,k=r.split(""),i=Y(t,s);return!o&&n>s.length&&(s+=e.slice(s.length,n)),k.every(function(u){for(;x=u,S(t,c=n)&&x!==e[c];){if(n>=s.length&&(s+=e[n]),f=u,w=n,o&&S(t,w)&&f===o)return!0;if(++n>=e.length)return!1}var f,w,c,x;return!V(t,n,u)&&u!==o||(n<s.length?s=o||i||n<h.length?s.slice(0,n)+u+s.slice(n+1):(s=s.slice(0,n)+u+s.slice(n),I(t,s)):o||(s+=u),++n<e.length)}),s}function ce(t,s,r,n){var e=t.mask,o=t.maskChar,h=r.split(""),k=n;return h.every(function(i){for(;f=i,S(t,u=n)&&f!==e[u];)if(++n>=e.length)return!1;var u,f;return(V(t,n,i)||i===o)&&n++,n<e.length}),n-k}function me(t,s){for(var r=s;0<=r;--r)if(!S(t,r))return r;return null}function N(t,s){for(var r=t.mask,n=s;n<r.length;++n)if(!S(t,n))return n;return null}function L(t){return t||t===0?t+"":""}function fe(t,s,r,n,e){var o=t.mask,h=t.prefix,k=t.lastEditablePosition,i=s,u="",f=0,w=0,c=Math.min(e.start,r.start);return r.end>e.start?w=(f=ce(t,n,u=i.slice(e.start,r.end),c))?e.length:0:i.length<n.length&&(w=n.length-i.length),i=n,w&&(w===1&&!e.length&&(c=e.start===r.start?N(t,r.start):me(t,r.start)),i=ue(t,i,c,w)),i=B(t,i,u,c),(c+=f)>=o.length?c=o.length:c<h.length&&!f?c=h.length:c>=h.length&&c<k&&f&&(c=N(t,c)),u||(u=null),{value:i=I(t,i),enteredString:u,selection:{start:c,end:c}}}function pe(){var t=new RegExp("windows","i"),s=new RegExp("phone","i"),r=navigator.userAgent;return t.test(r)&&s.test(r)}function b(t){return typeof t=="function"}function de(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame}function Z(){return window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame}function W(t){return(Z()?de():function(){return setTimeout(t,1e3/60)})(t)}function R(t){(Z()||clearTimeout)(t)}var he=function(t){function s(n){var e=t.call(this,n)||this;e.focused=!1,e.mounted=!1,e.previousSelection=null,e.selectionDeferId=null,e.saveSelectionLoopDeferId=null,e.saveSelectionLoop=function(){e.previousSelection=e.getSelection(),e.saveSelectionLoopDeferId=W(e.saveSelectionLoop)},e.runSaveSelectionLoop=function(){e.saveSelectionLoopDeferId===null&&e.saveSelectionLoop()},e.stopSaveSelectionLoop=function(){e.saveSelectionLoopDeferId!==null&&(R(e.saveSelectionLoopDeferId),e.saveSelectionLoopDeferId=null,e.previousSelection=null)},e.getInputDOMNode=function(){if(!e.mounted)return null;var a=te.findDOMNode(D(D(e))),m=typeof window<"u"&&a instanceof window.Element;if(a&&!m)return null;if(a.nodeName!=="INPUT"&&(a=a.querySelector("input")),!a)throw new Error("react-input-mask: inputComponent doesn't contain input node");return a},e.getInputValue=function(){var a=e.getInputDOMNode();return a?a.value:null},e.setInputValue=function(a){var m=e.getInputDOMNode();m&&(e.value=a,m.value=a)},e.setCursorToEnd=function(){var a=P(e.maskOptions,e.value),m=N(e.maskOptions,a);m!==null&&e.setCursorPosition(m)},e.setSelection=function(a,m,d){d===void 0&&(d={});var p=e.getInputDOMNode(),g=e.isFocused();p&&g&&(d.deferred||q(p,a,m),e.selectionDeferId!==null&&R(e.selectionDeferId),e.selectionDeferId=W(function(){e.selectionDeferId=null,q(p,a,m)}),e.previousSelection={start:a,end:m,length:Math.abs(m-a)})},e.getSelection=function(){return oe(e.getInputDOMNode())},e.getCursorPosition=function(){return e.getSelection().start},e.setCursorPosition=function(a){e.setSelection(a,a)},e.isFocused=function(){return e.focused},e.getBeforeMaskedValueChangeConfig=function(){var a=e.maskOptions,m=a.mask,d=a.maskChar,p=a.permanents,g=a.formatChars;return{mask:m,maskChar:d,permanents:p,alwaysShowMask:!!e.props.alwaysShowMask,formatChars:g}},e.isInputAutofilled=function(a,m,d,p){var g=e.getInputDOMNode();try{if(g.matches(":-webkit-autofill"))return!0}catch{}return!e.focused||p.end<d.length&&m.end===a.length},e.onChange=function(a){var m=D(D(e)).beforePasteState,d=D(D(e)).previousSelection,p=e.props.beforeMaskedValueChange,g=e.getInputValue(),C=e.value,v=e.getSelection();e.isInputAutofilled(g,v,C,d)&&(C=I(e.maskOptions,""),d={start:0,end:0,length:0}),m&&(d=m.selection,C=m.value,v={start:d.start+g.length,end:d.start+g.length,length:0},g=C.slice(0,d.start)+g+C.slice(d.end),e.beforePasteState=null);var O=fe(e.maskOptions,g,v,C,d),_=O.enteredString,j=O.selection,M=O.value;if(b(p)){var y=p({value:M,selection:j},{value:C,selection:d},_,e.getBeforeMaskedValueChangeConfig());M=y.value,j=y.selection}e.setInputValue(M),b(e.props.onChange)&&e.props.onChange(a),e.isWindowsPhoneBrowser?e.setSelection(j.start,j.end,{deferred:!0}):e.setSelection(j.start,j.end)},e.onFocus=function(a){var m=e.props.beforeMaskedValueChange,d=e.maskOptions,p=d.mask,g=d.prefix;if(e.focused=!0,e.mounted=!0,p){if(e.value)P(e.maskOptions,e.value)<e.maskOptions.mask.length&&e.setCursorToEnd();else{var C=I(e.maskOptions,g),v=I(e.maskOptions,C),O=P(e.maskOptions,v),_=N(e.maskOptions,O),j={start:_,end:_};if(b(m)){var M=m({value:v,selection:j},{value:e.value,selection:null},null,e.getBeforeMaskedValueChangeConfig());v=M.value,j=M.selection}var y=v!==e.getInputValue();y&&e.setInputValue(v),y&&b(e.props.onChange)&&e.props.onChange(a),e.setSelection(j.start,j.end)}e.runSaveSelectionLoop()}b(e.props.onFocus)&&e.props.onFocus(a)},e.onBlur=function(a){var m=e.props.beforeMaskedValueChange,d=e.maskOptions.mask;if(e.stopSaveSelectionLoop(),e.focused=!1,d&&!e.props.alwaysShowMask&&z(e.maskOptions,e.value)){var p="";b(m)&&(p=m({value:p,selection:null},{value:e.value,selection:e.previousSelection},null,e.getBeforeMaskedValueChangeConfig()).value);var g=p!==e.getInputValue();g&&e.setInputValue(p),g&&b(e.props.onChange)&&e.props.onChange(a)}b(e.props.onBlur)&&e.props.onBlur(a)},e.onMouseDown=function(a){if(!e.focused&&document.addEventListener){e.mouseDownX=a.clientX,e.mouseDownY=a.clientY,e.mouseDownTime=new Date().getTime();var m=function d(p){if(document.removeEventListener("mouseup",d),e.focused){var g=Math.abs(p.clientX-e.mouseDownX),C=Math.abs(p.clientY-e.mouseDownY),v=Math.max(g,C),O=new Date().getTime()-e.mouseDownTime;(v<=10&&O<=200||v<=5&&O<=300)&&e.setCursorToEnd()}};document.addEventListener("mouseup",m)}b(e.props.onMouseDown)&&e.props.onMouseDown(a)},e.onPaste=function(a){b(e.props.onPaste)&&e.props.onPaste(a),a.defaultPrevented||(e.beforePasteState={value:e.getInputValue(),selection:e.getSelection()},e.setInputValue(""))},e.handleRef=function(a){e.props.children==null&&b(e.props.inputRef)&&e.props.inputRef(a)};var o=n.mask,h=n.maskChar,k=n.formatChars,i=n.alwaysShowMask,u=n.beforeMaskedValueChange,f=n.defaultValue,w=n.value;e.maskOptions=U(o,h,k),f==null&&(f=""),w==null&&(w=f);var c=L(w);if(e.maskOptions.mask&&(i||c)&&(c=I(e.maskOptions,c),b(u))){var x=n.value;n.value==null&&(x=f),c=u({value:c,selection:null},{value:x=L(x),selection:null},null,e.getBeforeMaskedValueChangeConfig()).value}return e.value=c,e}se(s,t);var r=s.prototype;return r.componentDidMount=function(){this.mounted=!0,this.getInputDOMNode()&&(this.isWindowsPhoneBrowser=pe(),this.maskOptions.mask&&this.getInputValue()!==this.value&&this.setInputValue(this.value))},r.componentDidUpdate=function(){var n=this.previousSelection,e=this.props,o=e.beforeMaskedValueChange,h=e.alwaysShowMask,k=e.mask,i=e.maskChar,u=e.formatChars,f=this.maskOptions,w=h||this.isFocused(),c=this.props.value!=null,x=c?L(this.props.value):this.value,a=n?n.start:null;if(this.maskOptions=U(k,i,u),this.maskOptions.mask){!f.mask&&this.isFocused()&&this.runSaveSelectionLoop();var m=this.maskOptions.mask&&this.maskOptions.mask!==f.mask;if(f.mask||c||(x=this.getInputValue()),(m||this.maskOptions.mask&&(x||w))&&(x=I(this.maskOptions,x)),m){var d=P(this.maskOptions,x);(a===null||d<a)&&(a=Y(this.maskOptions,x)?d:N(this.maskOptions,d))}!this.maskOptions.mask||!z(this.maskOptions,x)||w||c&&this.props.value||(x="");var p={start:a,end:a};if(b(o)){var g=o({value:x,selection:p},{value:this.value,selection:this.previousSelection},null,this.getBeforeMaskedValueChangeConfig());x=g.value,p=g.selection}this.value=x;var C=this.getInputValue()!==this.value;C?(this.setInputValue(this.value),this.forceUpdate()):m&&this.forceUpdate();var v=!1;p.start!=null&&p.end!=null&&(v=!n||n.start!==p.start||n.end!==p.end),(v||C)&&this.setSelection(p.start,p.end)}else f.mask&&(this.stopSaveSelectionLoop(),this.forceUpdate())},r.componentWillUnmount=function(){this.mounted=!1,this.selectionDeferId!==null&&R(this.selectionDeferId),this.stopSaveSelectionLoop()},r.render=function(){var n,e=this.props,o=(e.mask,e.alwaysShowMask,e.maskChar,e.formatChars,e.inputRef,e.beforeMaskedValueChange,e.children),h=re(e,["mask","alwaysShowMask","maskChar","formatChars","inputRef","beforeMaskedValueChange","children"]);if(o){b(o)||T(!1);var k=["onChange","onPaste","onMouseDown","onFocus","onBlur","value","disabled","readOnly"],i=A({},h);k.forEach(function(f){return delete i[f]}),n=o(i),k.filter(function(f){return n.props[f]!=null&&n.props[f]!==h[f]}).length&&T(!1)}else n=F.createElement("input",A({ref:this.handleRef},h));var u={onFocus:this.onFocus,onBlur:this.onBlur};return this.maskOptions.mask&&(h.disabled||h.readOnly||(u.onChange=this.onChange,u.onPaste=this.onPaste,u.onMouseDown=this.onMouseDown),h.value!=null&&(u.value=this.value)),n=F.cloneElement(n,u)},s}(F.Component),ge=he;X.exports=ge;var ve=X.exports;const ke=G(ve),Ce=()=>{var m,d,p,g,C;const{register:t,handleSubmit:s,formState:{errors:r},reset:n,watch:e}=Q({mode:"onBlur"}),{user:o,registerUser:h,loginUser:k}=E.useContext(H),[i,u]=E.useState(!1),[f,w]=E.useState(!1),{pathname:c}=J(),x=E.useRef({});x.current=e("password","");const a=v=>{let{confirmPwd:O,..._}=v;c==="/login"?k(_):h(_)};return l.jsxs("div",{className:"register",children:[l.jsxs("div",{className:"register__left",children:[l.jsx("h2",{children:c==="/register"?"Регистрация":"Вход"}),c==="/login"&&l.jsxs("p",{children:["Если у вас нет аккаунта вы",l.jsx("br",{})," можете зарегестрироваться",l.jsx(K,{to:"/register",children:l.jsx("span",{children:" здесь !"})})]}),l.jsxs("form",{onSubmit:s(a),noValidate:!0,className:"form",action:"submit",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"email",children:"Email"}),l.jsx("div",{className:" form__box-field form__box-field_email",children:l.jsx("input",{...t("email",{required:{message:"Email обязателен к заполнению",value:!0},minLength:{message:"Минимум 8 символов",value:!0},pattern:{message:"Напишите корректный Email",value:/^[^ ]+@[^ ]+\.[a-z]{2,5}$/}}),id:"email",className:"form-field",type:"email",placeholder:"Ввидите свой Email"})}),l.jsx("p",{className:"register__label-error",children:(m=r.email)==null?void 0:m.message})]}),c==="/register"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"username",children:"Username"}),l.jsx("div",{className:" form__box-field form__box-field_username",children:l.jsx("input",{...t("username",{required:{message:"Имя обязательно к заполнению",value:!0},minLength:{message:"Минимум 3 символа",value:3},pattern:{message:"Используйте только буквы",value:/([a-zA-Z]+|[а-яА-Я])+/}}),id:"username",className:"form-field",type:"text",placeholder:"Ввидите своe имя"})}),l.jsx("p",{className:"register__label-error",children:(d=r.username)==null?void 0:d.message})]})," ",l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"number",children:"TEL"}),l.jsx("div",{className:" form__box-field form__box-field_tel",children:l.jsx(ke,{mask:"+\\7\\(\\999)-999-99-99",...t("number",{required:{message:"Обязательно к заполнению",value:!0},minLength:{message:"Минимум 11 символов",value:14},pattern:{message:"Введите все цифры",value:/^\+7\(9\d{2}\)-\d{3}-\d{2}-\d{2}$/}}),id:"number",className:"form-field",type:"tel",placeholder:"Введите номер телефона"})}),l.jsx("p",{className:"register__label-error",children:(p=r.number)==null?void 0:p.message})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"password",children:"Password"}),l.jsxs("div",{className:" form__box-field form__box-field_password",children:[l.jsx("input",{...t("password",{required:{message:"Обязательно к заполнению",value:!0},minLength:{message:"Минимум 8 символов",value:8},pattern:{message:"Пароль должен состоять из цифр и латинских букв верхнего и нижнего регистра",value:/^[a-zA-Z0-9]+/}}),id:"password",className:"form-field",type:f?"text":"password",placeholder:"Ввидите пароль"}),l.jsx("img",{onClick:()=>{w(v=>!v)},src:`/images/icons/${f?"eyeInvisible":"eye"}.png`,alt:"eye"})]}),l.jsx("p",{className:"register__label-error",children:(g=r.password)==null?void 0:g.message})]}),c==="/register"&&l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"confirmPwd",children:"ConfirmPassword"}),l.jsxs("div",{className:" form__box-field form__box-field_password",children:[l.jsx("input",{...t("confirmPwd",{validate:v=>v===x.current||"Пароли не совпадают"}),id:"confirmPwd",className:"form-field",type:i?"text":"password",placeholder:"Подтвердите пароль "}),l.jsx("img",{onClick:()=>{u(v=>!v)},src:`/images/icons/${i?"eyeInvisible":"eye"}.png`,alt:"eye"})]}),l.jsx("p",{className:"register__label-error",children:(C=r.confirmPwd)==null?void 0:C.message})]}),l.jsx("input",{className:"form-button",type:"submit",value:c==="/register"?"Зарегистрироваться":"Войти"})]})]}),l.jsxs("div",{className:"register__right",children:[l.jsx("img",{src:"/images/image/Login.jpg",alt:"sign in"}),l.jsx("h3",{children:"Sign in to name"})]})]})};export{Ce as F};
